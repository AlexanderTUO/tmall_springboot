<div th:fragment="html">
    <script>
        $(function () {
            var data4Vue = {
                uri: "foreCart",
                orderItems: []
            };
            var vue = new Vue({
                el: "#workingArea",
                data: data4Vue,
                mounted: function () {
                    this.load();
                },
                methods: {
                    load: function () {
                        var url = this.uri;
                        axios.get(url).then(function (response) {
                            vue.orderItems = response.orderItems;

                            vue.$nextTick(function () {
                                linkDefaultActions();
                            })
                        })
                    },
                    submitOrder: function () {
                        var url = "foreCreateOrder";
                        axios.post(url, this.order).then(function (response) {
                            var result = response.data;
                            var total = result.data.total;
                            var oid = result.data.oid;

                            vue.$nextTick(function () {
                                linkDefaultActions();
                                cartPageRegisterListeners();
                            })
                        })
                    }
                }
            });
        })

        var deleteOrderItem = false;
        var deleteOrderItemId = 0;
        function cartPageRegisterListeners() {
            //绑定删除订单事件

            //确定删除订单

            //模态框关闭事件


        }
    </script>
    <div class="cartDiv">
        <div class="cartTitle pull-right">
            <span>已选商品(不含运费)</span>
            <span class="cartTitlePrice">￥0.00</span>
            <button class="createOrderButton" disabled="disabled">结算</button>
        </div>
        <div class="cartProductList">
            <table class="cartProductTable">
                <thead>
                    <tr>
                        <th>
                            <img selectit="falsa" class="selectAllItem" src="img/site/cartNotSelected.png">
                            全选
                        </th>
                        <th>商品信息</th>
                        <th>单价</th>
                        <th>数量</th>
                        <th width="120px">金额</th>
                        <th class="operation">操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr :oiid="oi.id" class="cartProductItemTR" v-for="oi in orderItems">
                        <td>
                            <img selectedit="false" :oiid="oi.id" class="cartProductItemIfSelected"
                                 src="img/site/cartSelected.png">
                            <a style="display:none" href="#nowhere">
                                <img src="img/site/cartSelected.png">
                            </a>
                            <img class="cartProductImg" :src="'img/productSingle_middle/'+oi.product.firstProductImage.id+'.jpg'">
                        </td>
                        <td class="orderItemProductInfo">
                            <div class="cartProductLinkOutDiv">
                                <a :href="'product?pid='+oi.product.id" class="orderItemProductLink">
                                    {{oi.product.name}}
                                </a>
                                <div class="cartProductLinkInnerDiv">
                                    <img src="img/site/creditcard.png" title="支持信用卡支付">
                                    <img src="img/site/7day.png" title="消费者保障服务，承诺七天退货">
                                    <img src="img/site/promise.png" title="消费者保障服务，承诺如实描述">

                                </div>
                            </div>
                        </td>
                        <td>
                            <span class="cartProductItemOringalPrice">
                                ￥{{oi.product.originalPrice|formatMoneyFilter}}
                            </span>
                            <span class="cartProductItemPromotionPrice">
                                ￥{{oi.product.promotePrice|formatMoneyFilter}}
                            </span>
                        </td>
                        <td>
                            <div class="cartProductChangeNumberDiv">
                                <span class="hidden orderItemStock" :pid="oi.product.id">
                                    {{oi.product.stock}}
                                </span>
                                <span class="hidden orderItemPromotePrice" :pid="oi.product.id">
                                    {{oi.product.promotePrice}}
                                </span>
                                <a :pid="oi.product.id" class="numberMinus" href="#nowhere">
                                    -
                                </a>
                                <input :pic="pi.product.id" :oiid="oi.id" class="orderItemNumberSetting"
                                       autocomplete="off" :value="oi.number">
                                <a :stock="oi.product.stock":pid="oi.product.id" class="numberPlus" href="#nowhere">
                                    +
                                </a>
                            </div>
                        </td>
                        <td>
                            <span class="cartProductItemSmallSumPrice" :pid="oi.product.id" :oiid="oi.id">
                                ￥{{oi.product.promotePrice*oi.number|formatMoneyFilter}}
                            </span>
                        </td>
                        <td>
                            <a class="deleteOrderItem" :oiid="oi.id" href="#nowhere">删除</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="cartFoot">
            <img selectit="false" class="selectAllItem" src="img/site/cartSelected.png">
            <span>全选</span>
            <div class="pull-right">
                <span>已选商品<span class="cartSumNumber">0</span>件</span>
                <span>合计(不含运费):</span>
                <span class="cartSumPrice">￥{{}}</span>
                <button class="createOrderButton" disabled="disabled">结  算</button>
            </div>
        </div>
    </div>
</div>